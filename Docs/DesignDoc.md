# Дизайн-документ
Описание сущностей и механик игры.
## 1. Игрок
![Выбранная модель персонажа игрока (artstation.com/alanik)](https://github.com/Krusnik777/ZenithRPG/assets/132759904/e9649280-4d6a-45ab-85b1-46a37215e7fb)
### Поведение
Перемещается по сеточному (grid-based) миру игру. Взаимодействует с объектами окружения. Собирает предметы и экипировку. Сражается с врагами в ближнем бою или с помощью магии. Может блокировать атаки. Может отдыхать (восстанавливает здоровье и ману).
### Свойства
- Скорости движения, поворота и анимаций действий персонажа (прыжка, атак, блока и т.д.).
- Характеристики персонажа: уровень, количество здоровья, количество маны, показатель силы, показатель интеллекта, показатель магической защиты, показатель удачи, показатель атаки (зависим от показателя силы и экипировки), показатель защиты (зависим от экипировки и частично от показателя магической защиты).
- Инвентарь: предметы и экипировка.
- Деньги.
## 2. Инвентарь игрока
![Выбранный вариант инвентаря](https://github.com/Krusnik777/ZenithRPG/assets/132759904/a2674a4d-e977-4bf1-b1cb-402e4d06167c)
### Поведение
Хранит собранные игроком предметы и экипировку и позволяет взаимодействовать с ними. Состоит из ограниченного количества ячеек. Может расширяться за счет собранных дополнительных сумок. Есть отдельные ячейки под используемую экипировку и ячейки быстрого использования предметов.
### Свойства
- "Сумки": основная и три дополнительных (в теории открываются в ходе исследования/прогресса в игре). Представляют собой 9 ячеек под предметы.
- Ячейки под экипировку: оружие (меч), доспех, щит и магический предмет.
- Три ячейки быстрого использования предметов.
- Возможность использовать предметы. Только для используемых предметов.
- Возможность собирать/объединять определенные предметы одного вида в одной ячейке.
- Возможность удалять предметы из инвентаря. Предмет "выбрасывается" на локацию при отсутствии препятствий и может быть подобран позже. (Но в определенных случаях может быть потерян навсегда.)
## 3. Предметы
![Предметы](https://github.com/Krusnik777/ZenithRPG/assets/132759904/efeedaee-57e2-4c2a-82cb-ce669f3ffa8c)
### Поведение
Собираемые игроком объекты. Выпадают из врагов (с определенным шансом), находятся на локациях или чаще всего при взаимодействии с интерактивными объектами (сундуками и т.д). Делятся на типы и в зависимости от него разные способы применения.
### Свойства
- Тип предмета: оружие (влияет на показатель атаки персонажа и дает персонажу возможность наносить атаки), доспех (влияет на показатель защиты персонажа), щит (влияет на показатель защиты персонажа и дает персонажу возможность блокировать вражеские атаки), магический предмет (дает возможность использовать магию определенного вида), используемый предмет (используются при применении - эффект и требования различны), неиспользуемый предмет (либо предмет на продажу, либо предмет, который дарит особый эффект персонажу, находясь в основной сумке инвентаря).
- Текущее количество и максимально возможное количество одного вида предмета в одной ячейке инвентаря (один вид предмета соединяется/собирается в одной ячейке инвентаря). Только для используемых и неиспользуемых предметов.
- Прочность (для оружия). Снижается при использовании в бою, и при полном снижении прочности до нуля оружие ломается. Не восстанавливается, но может быть неограниченным в использованиях - в таком случае оружие никогда не сломается.
- Количество использований (для магического предмета). Снижается при использовании магии и не тратит ману, но при полном израсходовании магический предмет уничтожается. Количество использований не восстанавливается, но может быть неограниченным в использованиях - в таком случае на использовании заклинаний тратится мана.
- Эффект применения (для используемых предметов). Различается от предмета: зелья лечат, ключи открывают двери/сундуки, молоты ломают хрупкие стены и так далее. Могут иметь (например, надо находиться перед дверью, чтоб использовать ключ) или не иметь (например, выпить зелье можно везде) требования к использованию.
- Пассивный эффект (для неиспользуемых предметов). Может быть или не быть. В первом случае эффект действует только тогда, когда предмет нахоидся в основной сумке инвентаря. Пример пассивного эффекта: кольцо "воскрешения", которое восстанавливает здоровье игрока до максимума, если у него снизилось здоровье до нуля.
- Стоимость. Сколько денег будет получено за продажу/покупку предмета в магазинах.
## 4. Враги (ИИ)
![Вражеский охранник и паук](https://github.com/Krusnik777/ZenithRPG/assets/132759904/a71e5c77-c6ca-4c8b-8100-58a514f27a12)
### Поведение
Управляются ИИ. Патрулируют/охраняют зону. Начинают преследовать игрока, если тот попал в поле зрения или если подошел слишком близко. Атакуют игрока с некоторой периодичностью, если подошли на расстояние удара. 
### Свойства
- Скорости движения, поворота и атак.
- Поле зрения и радиус чувствительности к игроку.
- Состояния: патрулирование, преследование и нападение.
- Задержки между действиями и переключениями состояний.
- Характеристики: уровень, количество здоровья, показатель силы, показатель интеллекта, показатель магической защиты, показатель удачи, прибавка к атаке, прибавка к защите.
- Выпадаемые предметы при гибели и шанс их выпадения.
- Количество получаемых денег за победу над врагом.
- Количество получаемого опыта за победу над врагом.
## 5. NPC
![Старик и бандит](https://github.com/Krusnik777/ZenithRPG/assets/132759904/60a6e7e0-5300-4b10-8eab-0c24fc21182f)
### Поведение
Объект взаимодействия. Игрок может поговорить с персонажем для получения дополнительной информации или для продвижения в игре.
### Свойства
- Диалог (= серия фраз) или серия диалогов.
- Потенциальное событие при завершении диалога/серии диалогов.
## 6. Магазин
![Дверь в магазин](https://github.com/Krusnik777/ZenithRPG/assets/132759904/4e82eb1e-c1e1-4870-ad2b-d5ec7f9c243b)
### Поведение
Объект взаимодействия. Игрок может покупать и продавать предметы (некоторые предметы продавцы откажутся покупать), а также поговорить с продавцом для получения дополнительной информации.
### Свойства
- Наценка на стоимость предметов.
- Предметы на продажу.
- Диалог/серия диалогов. В первый раз воспроизводятся в заданной очереди, затем повторяются в случайном порядке. Некоторые диалоги могут быть неповторяемы (проигрываются только раз и все).
## 7. Дверь
![Дверь](https://github.com/Krusnik777/ZenithRPG/assets/132759904/ee17350a-6353-402d-bd10-35fe841a8e11)
### Поведение
Объект взаимодействия. Открывается/закрывается игроком, но может быть изначально закрыта и требовать особых действия от игрока для открытия (использования ключа-отмычки, определенного ключа, определенного действия и так далее).
### Свойства
- Доступность к прямому взаимодействию. Может ли игрок взаимодействовать с дверью напрямую или нет.
- Закрыта или открыта.
- Требует использования особого ключа (предмета) для открытия или нет. Для закрытой двери.
- Какой ключ (предмет) требуется для открытия. Для случая, когда требуется использование особого ключа (предмета).
## 8. Сундук
![Сундук](https://github.com/Krusnik777/ZenithRPG/assets/132759904/638fe4c7-db97-474e-9286-4df803cdf4d4)
### Поведение
Объект взаимодействия. Хранит (или нет) какой-нибудь предмет или дает деньги/содержит дополнительную сумку для инвентаря игрока. Открывается/закрывается игроком, но может быть изначально закрыт и требовать особых действия от игрока для открытия (использования ключа-отмычки, определенного ключа, определенного действия и так далее). Игрок также может "забросить" предмет из инвентаря в пустой сундук.
### Свойства
- Содержит либо данные о предмете: предмет + его количество (для используемых/неиспользуемых предметов)/прочность (для оружия)/количество использований (для магических предметов), - либо деньги, либо дополнительную сумку для инвентаря, либо ничего.
- Закрыт или открыт.
- Требует использования особого ключа (предмета) для открытия или нет. Для закрытого сундука.
- Какой ключ (предмет) требуется для открытия. Для случая, когда требуется использование особого ключа (предмета).
- Потенциальное событие при открытии сундука.
## 9. Контейнер предмета
![Предмет на локации](https://github.com/Krusnik777/ZenithRPG/assets/132759904/42877707-a2de-4944-a0c6-68d57cb8d1f8)
### Поведение
Объект взаимодействия, который хранит в себе данные о предмете. Представляет собой "физическое" воплощение предмета на локации. Например, этот объект создается на локации, когда игрок выбрасывает предмет из инвентаря или когда выпадает предмет после гибели врагов.
### Свойства
- Предмет.
- Количество (для используемых/неиспользуемых предметов)/прочность (для оружия)/количество использований (для магических предметов
- Потенциальное событие при подборе предмета.
## 10. Нажимная плита
![Нажимная плита](https://github.com/Krusnik777/ZenithRPG/assets/132759904/fe8fadc7-3345-47a6-94c9-ced6b0ae961d)
### Поведение
Объект взаимодействия. Срабатывает, когда на нее наступает или с нее сходит игрок/враг. При срабатываниях вызывает события.
### Свойства
- Возвращается в начальное (не нажатое) положение, в тот момент когда с плиты сходит игрок/враг, или нет.
- Потенциальное событие при переходе в нажатое состояние.
- Потенциальное событие при возврате из нажатого состояния.
- Отключена или нет.
## 11. Рычаг
![Рычаг](https://github.com/Krusnik777/ZenithRPG/assets/132759904/e5c8cc76-cf6a-4d4e-94ec-96be90360717)
### Поведение
Объект взаимодействия. Используется игроком. В разных положениях вызывает события.
### Свойства
- Возвращается в начальное (не опущенное) положение или нет. Равноценно тому, используется рычаг только раз или несколько.
- Потенциальное событие при переходе рычага в опущенное состояние.
- Потенциальное событие при возврате рычага из опущенного состояния.
## 12. Плита-ловушка
![Ловушка](https://github.com/Krusnik777/ZenithRPG/assets/132759904/bc104feb-6a41-4733-84b5-8434a0da33e6)
### Поведение
Объект взаимодействия. Срабатывает, когда на нее наступает игрок или враг, и наносит урон.
### Свойства
- Количество наносимого урона.
- Отключена или нет.
## 13. Стреляющая ловушка
![Стреляющая ловушка](https://github.com/Krusnik777/ZenithRPG/assets/132759904/78cf1cf3-80ed-44ea-a5a2-91f94b4ba3fe)
### Поведение
Объект взаимодействия. Стреляет магическими шарами (потенциально пулями/снарядами/стрелами).
### Свойства
- Вызываемая магия (содержит в себе скорость перемещения и количество наносимого урона).
- Отключена или нет.
## 14. Яма/Яма-ловушка
![Виды ям](https://github.com/Krusnik777/ZenithRPG/assets/132759904/91a9ff1f-4a91-4047-ad1d-246393d37b2f)
### Поведение
Объект взаимодействия. Игроку наносится урон, если он упадет в яму. Яма может быть скрыта от глаз игрока плиткой "пола", которая сломается, когда на нее наступит игрок и он провалится в яму. Игрок может различить яму-ловушку от обычной плитки "пола", "рассматривая" окружение или используя особые предметы.
### Свойства
- Наносимый урон.
- Для ямы-ловушки: раскрыта или нет.
## 15. Магический факел
![Факел](https://github.com/Krusnik777/ZenithRPG/assets/132759904/fd470c62-3562-44b2-8f0b-d6ace4dc3e47)
### Поведение
Объект взаимодействия. Может быть зажжен с помощью огненного шара. Когда зажигается, вызывается событие.
### Свойства
- Зажжен или нет.
- Потенциальное событие в момент зажжения.
## 16. Тело/труп/останки
![Бездыханное тело](https://github.com/Krusnik777/ZenithRPG/assets/132759904/7c7c736e-565c-4ff6-8fb5-56cb38d47a76)
### Поведение
Объект взаимодействия. Представляет собой скрытый контейнер предметов. Может хранить какой-нибудь предмет, однако требует более тщательного осмотра.
### Свойства
- Содержит данные о предмете: предмет + его количество (для используемых/неиспользуемых предметов)/прочность (для оружия)/количество использований (для магических предметов), - либо ничего.
- Количество требуемых осмотров для получения предмета.
- Потенциальное событие при достаточном количестве осмотров.
## 17. Трескающаяся стена
![Ломающаяся стена](https://github.com/Krusnik777/ZenithRPG/assets/132759904/4d781576-9ad5-4403-b374-c95acf26d0ef)
### Поведение
Объект взаимодействия. Стена, которую можно разломать с помощью определенного предмета, и открыть проход.
### Свойства
- Разломана или нет.
- Потенциальное событие при разломе стены.
## 18. Выход с уровня/Переход между уровнями
![Выход](https://github.com/Krusnik777/ZenithRPG/assets/132759904/cae66f5f-3ad9-4fdf-9db2-e4834155b671)
### Поведение
Объект взаимодействия. Совершает переход на другой уровень.
### Свойства
- Потенциальное событие перед выходом со сцены.
## 19. Настенная плитка
![Плитка с письменами](https://github.com/Krusnik777/ZenithRPG/assets/132759904/0ef74511-e29b-495e-a548-d8f334f83251)
### Поведение
Объект взаимодействия. Содержит различную информацию.
### Свойства
- Потенциальное событие после взаимодействия с плиткой.
## 20. Триггеры
- ### Сюжетное событие/Сюжетное микро-событие
Проигрывает сценку/диалог или показывает краткую сценку. Срабатывает только один раз.
- ### Условный триггер
Вызывает определенное событие при выполнении условия. Срабатывает только один раз.
- ### Триггер с несколькими условиями/Триггер из нескольких условных триггеров
Вызывает событие при выполнении всех условий. Срабатывает только один раз.
- ### Контрольная точка
Сохраняет состояние уровня на момент достижения контрольной точки. Срабатывает только один раз. Сохраненные данные стираются после перезапуска уровня, перехода на другой уровень или загрузки ручного сохранения.
- ### Включатель врагов
Включает неактивных врагов. Больше для оптимизации.
- ### Сменитель состояний объектов
Меняет на выбор состояния некоторых объектов. Может включать/выключать ловушки и нажимные плиты, закрывать/блокировать/открывать двери, удалять NPC.
